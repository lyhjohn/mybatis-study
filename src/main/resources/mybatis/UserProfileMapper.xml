<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.yohan.mybatisstudy.mapper.UserProfileMapper">

  <resultMap type="com.yohan.mybatisstudy.model.UserProfile" id="usermap">
    <result column="name" property="username"/>
    <result column="phone" property="userPhone"/>
    <collection property="employees" column="id" ofType="Employee" select="selectEmployees"/>
  </resultMap>

  <select id="selectUser" resultMap="usermap">
    select * from userprofile u where #{id} =u.id;
  </select>

  <select id="selectEmployees" resultType="com.yohan.mybatisstudy.model.Employee">
    select * from Employee e where ${id} = e.user_id;
  </select>
</mapper>